import{J as E,x as R,r as U,j as e,S as n}from"./app-BcHd4eWn.js";import{N as F,U as L,D as P,c as I,d as G}from"./NavBar-jo5iGGA3.js";import{H as M}from"./Head-_xtiLubh.js";import{C as T,R as y,a as i,A as f,B as H}from"./Alert-CWZpn_r8.js";import{T as O,P as z,a as d,b as a}from"./PaginationLink-D1zdbk4P.js";import{F as J,a as B,L as b,I as q,b as Q}from"./Label-sRUBmtYk.js";import{R as C}from"./RowFormGroupSelect-D7y3-bLI.js";import"./Progress-CUABgi0U.js";const u="/build/assets/bstr-black-down-Y0mw1zr6.svg",h="/build/assets/bstr-black-up-Cd1HoMj5.svg",m="/build/assets/bstr-gray-down-DfwarobR.svg",g="/build/assets/bstr-gray-up-DjpVTJQl.svg",v={day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1},te=({paginator:l,brunches:w})=>{const{routes:x}=E().props,c="/"+x.review_table_prefix+"/"+x.review,D=window.location.search,r=new URLSearchParams(D),{data:o,setData:_,post:k,processing:S,errors:j}=R({brunches:[],user_id:"",two_gis_id:"",pupr_user_id:"",address:""}),[N,A]=U.useState(!1),$=t=>{t.preventDefault(),k(`/${x.backendprefix}/${x.brunch}`+(N?"?redirectOnCreation=true":""))};return e.jsxs(e.Fragment,{children:[e.jsx(M,{title:"Отзывы"}),e.jsx(F,{}),e.jsxs(T,{fluid:!0,children:[e.jsx(y,{className:"my-3",children:e.jsxs(i,{children:[e.jsx("h2",{children:"Отзывы"}),e.jsxs(f,{color:"info",children:["Всего записей: ",l.total]}),e.jsx(J,{className:"row",onSubmit:$,children:e.jsxs(i,{className:`
                        border
                        border-primary
                        rounded
                        col-12
                        mb-4
                        pt-4
                        `,children:[e.jsxs(B,{row:!0,className:"mb-4",children:[e.jsx(b,{sm:3,children:"Филиал"}),e.jsxs(i,{sm:9,children:[e.jsxs(L,{children:[e.jsxs(P,{caret:!0,children:["Выбрано: ",o.brunches.length]}),e.jsx(I,{children:w.map((t,s)=>e.jsx(G,{className:"d-flex p-0",color:o.brunches.includes(t.id),toggle:!1,onClick:p=>p.preventDefault(),children:e.jsxs(b,{className:"",children:[e.jsx("span",{children:t.name}),e.jsx(q,{onChange:p=>{_("brunches",[...o.brunches,p.target.value]),console.log(o.brunches)},type:"checkbox",value:t.id},"brunchFilter-"+s)]})}))})]}),j.brunches?e.jsx(Q,{children:j.brunches}):null]})]}),e.jsx(C,{label:"Управляющий",value:o.user_id,onChange:t=>_("user_id",t.target.value),error:j.user_id}),e.jsx(C,{label:"Помошник управляющего",value:o.pupr_user_id,onChange:t=>_("pupr_user_id",t.target.value),error:j.pupr_user_id}),e.jsx(B,{children:e.jsx(H,{className:"w-100",type:"submit",value:"Сохранить",color:"primary",outline:!0,disabled:S,onClick:()=>A(!1),children:"Фильтровать"})})]})})]})}),e.jsx(y,{className:"small",children:e.jsx(i,{children:e.jsxs(O,{responsive:!0,size:"sm",hover:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-center",children:[e.jsx("th",{children:"#"}),e.jsxs("th",{className:"col-1",children:[e.jsx("div",{className:"mr-1",children:"Дата публикации отзыва"}),e.jsxs("div",{className:"d-flex justify-content-center align-items-center gap-2",children:[e.jsx("img",{src:r.get("column")==="posted_at"&&r.get("orderBy")==="ASC"?h:g,width:15,height:15,onClick:t=>{t.preventDefault(),n.visit(c+"?column=posted_at&orderBy=ASC")}}),e.jsx("img",{src:r.get("column")=="posted_at"&&r.get("orderBy")=="DESC"?u:m,width:15,height:15,onClick:t=>{t.preventDefault(),n.visit(c+"?column=posted_at&orderBy=DESC")}})]})]}),e.jsxs("th",{className:"col-1",children:[e.jsx("div",{children:"Дата начала проверки"}),e.jsxs("div",{className:"d-flex justify-content-center align-items-center gap-2",children:[e.jsx("img",{src:r.get("column")==="start_work_on"&&r.get("orderBy")==="ASC"?h:g,width:15,height:15,onClick:t=>{t.preventDefault(),n.visit(c+"?column=start_work_on&orderBy=ASC")}}),e.jsx("img",{src:r.get("column")==="start_work_on"&&r.get("orderBy")==="DESC"?u:m,width:15,height:15,onClick:t=>{t.preventDefault(),n.visit(c+"?column=start_work_on&orderBy=DESC")}})]})]}),e.jsxs("th",{className:"col-1",children:[e.jsx("div",{children:"Дата завершения проверки"}),e.jsxs("div",{className:"d-flex justify-content-center align-items-center gap-2",children:[e.jsx("img",{src:r.get("column")==="end_work_on"&&r.get("orderBy")==="ASC"?h:g,width:15,height:15,onClick:t=>{t.preventDefault(),n.visit(c+"?column=end_work_on&orderBy=ASC")}}),e.jsx("img",{src:r.get("column")==="end_work_on"&&r.get("orderBy")==="DESC"?u:m,width:15,height:15,onClick:t=>{t.preventDefault(),n.visit(c+"?column=end_work_on&orderBy=DESC")}})]})]}),e.jsx("th",{children:"Платформа"}),e.jsx("th",{children:"Филиал"}),e.jsxs("th",{children:[e.jsx("div",{children:"Текущий рейтинг"}),e.jsxs("div",{className:"d-flex justify-content-center align-items-center",children:[e.jsx("img",{src:r.get("column")==="total_brunch_rate"&&r.get("orderBy")==="ASC"?h:g,width:15,height:15,onClick:t=>{t.preventDefault(),n.visit(c+"?column=total_brunch_rate&orderBy=ASC")}}),e.jsx("img",{src:r.get("column")==="total_brunch_rate"&&r.get("orderBy")==="DESC"?u:m,width:15,height:15,onClick:t=>{t.preventDefault(),n.visit(c+"?column=total_brunch_rate&orderBy=DESC")}})]})]}),e.jsxs("th",{children:[e.jsx("div",{children:"Оценка"}),e.jsxs("div",{className:"d-flex justify-content-center align-items-center gap-2",children:[e.jsx("img",{src:r.get("column")==="score"&&r.get("orderBy")==="ASC"?h:g,width:15,height:15,onClick:t=>{t.preventDefault(),n.visit(c+"?column=score&orderBy=ASC")}}),e.jsx("img",{src:r.get("column")==="score"&&r.get("orderBy")==="DESC"?u:m,width:15,height:15,onClick:t=>{t.preventDefault(),n.visit(c+"?column=score&orderBy=DESC")}})]})]}),e.jsx("th",{className:"col-3",children:"Отзыв"}),e.jsx("th",{className:"col-3",children:"Комментарий управляющего"}),e.jsx("th",{className:"col-3",children:"Ответ SMM на платформе"})]})}),e.jsx("tbody",{children:l.data.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{children:t.review_id},`review_id-${s}`),e.jsx("td",{children:new Date(t.posted_at.replace(/Z$/,"")).toLocaleString("ru-RU",v)},`posted_at-${s}`),e.jsx("td",{children:t.start_work_on?new Date(t.start_work_on).toLocaleString("ru-RU",v):"-"},`start_work_on-${s}`),e.jsx("td",{children:t.end_work_on?new Date(t.end_work_on).toLocaleString("ru-RU",v):"-"},`end_work_on-${s}`),e.jsx("td",{children:t.resource.toUpperCase()},`resource-${s}`),e.jsx("td",{children:t.brunch_name},`brunch_name-${s}`),e.jsx("td",{className:"text-center",children:t.total_brunch_rate},`total_brunch_rate-${s}`),e.jsx("td",{className:"text-center",children:e.jsx(f,{color:t.score<=3?"danger":t.score==4?"warning":"success",children:t.score})},`score-${s}`),e.jsx("td",{children:t.comment},`comment-${s}`),e.jsx("td",{children:t.control_review},`control_review-${s}`),e.jsx("td",{children:t.final_answer},`final_answer-${s}`)]}))})]})})}),e.jsx(y,{children:e.jsx(i,{className:" d-flex justify-content-center",children:e.jsxs(z,{className:" d-flex justify-content-center gap-3",children:[e.jsx(d,{children:e.jsx(a,{first:!0,href:l.first_page_url+(r.get("column")?"&column="+r.get("column"):"")+(r.get("orderBy")?"&orderBy="+r.get("orderBy"):""),onClick:t=>{t.preventDefault(),n.visit(l.first_page_url+(r.get("column")?"&column="+r.get("column"):"")+(r.get("orderBy")?"&orderBy="+r.get("orderBy"):""))}})}),l.prev_page_url?e.jsx(d,{children:e.jsx(a,{previous:!0,href:l.prev_page_url+(r.get("column")?"&column="+r.get("column"):"")+(r.get("orderBy")?"&orderBy="+r.get("orderBy"):""),onClick:t=>{t.preventDefault(),n.visit(l.prev_page_url+(r.get("column")?"&column="+r.get("column"):"")+(r.get("orderBy")?"&orderBy="+r.get("orderBy"):""))}})}):null,l.links.slice(1,l.links.length-1).map(t=>e.jsxs(d,{disabled:!t.url,active:t.active,children:[e.jsx(a,{href:t.url+(r.get("column")?"&column="+r.get("column"):"")+(r.get("orderBy")?"&orderBy="+r.get("orderBy"):""),onClick:s=>{s.preventDefault(),n.visit(t.url+(r.get("column")?"&column="+r.get("column"):"")+(r.get("orderBy")?"&orderBy="+r.get("orderBy"):""))},children:t.label})," "]})),l.next_page_url?e.jsx(d,{children:e.jsx(a,{next:!0,href:l.next_page_url+(r.get("column")?"&column="+r.get("column"):"")+(r.get("orderBy")?"&orderBy="+r.get("orderBy"):""),onClick:t=>{t.preventDefault(),n.visit(l.next_page_url+(r.get("column")?"&column="+r.get("column"):"")+(r.get("orderBy")?"&orderBy="+r.get("orderBy"):""))}})}):null,e.jsx(d,{children:e.jsx(a,{last:!0,href:l.last_page_url+(r.get("column")?"&column="+r.get("column"):"")+(r.get("orderBy")?"&orderBy="+r.get("orderBy"):""),onClick:t=>{t.preventDefault(),n.visit(l.last_page_url+(r.get("column")?"&column="+r.get("column"):"")+(r.get("orderBy")?"&orderBy="+r.get("orderBy"):""))}})})]})})})]})]})};export{te as default};
